# 信用卡 RAG 資料集 Metadata 欄位說明

本文件詳細說明「信用卡 RAG 表格」資料集中的 Metadata 欄位結構。此資料集設計用於 RAG（Retrieval-Augmented Generation）系統，其中 `text` 欄位為主要向量化目標，其餘欄位則作為篩選器（Filters）與上下文增強（Context Augmentation）使用。

## 資料表結構總覽

| 欄位名稱 (Column) | 資料類型 | 必填 | 說明 (Description) | 用途 (Usage) |
| :--- | :--- | :--- | :--- | :--- |
| `id` | String | Yes | 文本塊的唯一識別碼 (Primary Key)。 | 檢索定位、除錯。 |
| `text` | String | Yes | **向量化目標文本**。包含完整的權益規則或優惠內容。 | Embedding、語意檢索。 |
| `card_name` | String | Yes | 信用卡產品全名。 | 精確篩選特定卡片。 |
| `card_family` | String | Yes | 信用卡產品系列。 | 篩選同系列卡片（如：CUBE卡系列）。 |
| `doc_type` | String | Yes | 文件/文本類型分類。 | 區分「規則」、「首刷禮」或「通用權益」。 |
| `scheme_name` | String | No | 權益方案或活動名稱。 | 針對特定活動（如：玩數位）進行篩選。 |
| `reward_type` | String | Yes | 回饋獎勵的類型。 | 篩選喜歡「里程」或「點數」的用戶偏好。 |
| `valid_period` | String | No | 權益有效期限。 | 時間過濾，排除過期資訊。 |
| `issuer` | String | Yes | 發卡銀行名稱。 | 機構識別。 |
| `source` | String | Yes | 原始來源檔案名稱。 | 資料溯源。 |

---

## 詳細欄位值域說明 (Enumeration)

以下列出各分類欄位中目前實際存在的標準化數值，可用於建立下拉式選單或 Enums。

### 1. 文件類型 (`doc_type`)
用於定義該段文本的性質，幫助 RAG 判斷該回答規則還是介紹優惠。

* `benefit_rule`: **權益規則**（詳細的包含/排除條款、通路定義）。
* `benefit_scheme`: **權益方案**（主要的回饋機制介紹）。
* `welcome_offer`: **首刷禮/新戶禮**（限時的新戶優惠活動）。
* `global_rule`: **通用規則**（適用於全卡的通則）。
* `credit_card_profile`: **產品概況**（卡片的基本介紹、年費等）。

### 2. 回饋類型 (`reward_type`)
標示該權益所提供的回饋形式。

* `points`: **點數**（如：小樹點）。
* `miles`: **里程**（如：亞洲萬里通里數）。
* `mixed`: **混合回饋**（如：點數 + 免運券）。
* `privilege`: **權益/禮遇**（如：機場接送、貴賓室，非點數類）。
* `other`: **其他**（不涉及具體數值的權益描述）。

### 3. 卡片名稱 (`card_name`)
目前有以下這些卡別：

* 國泰CUBE卡
* 國泰蝦皮購物聯名卡
* 國泰世華世界卡
* 國泰亞洲萬里通聯名卡
* 國泰亞洲萬里通聯名卡世界卡
* 國泰亞洲萬里通聯名卡鈦金商務卡
* 國泰亞洲萬里通聯名卡白金卡
* 國泰亞洲萬里通聯名卡里享卡

### 4. 權益方案名稱 (`scheme_name`)
只有 `benefit_rule`, `benefit_scheme` 的chunk會有此欄

* **CUBE卡權益**：`玩數位`、`樂饗購`、`集精選`、`趣旅行`
* **蝦皮卡權益**：`蝦皮全站回饋`、`免運券回饋`、`海外消費免手續費`、`12/12 全站折扣（限一天）`
* **世界卡權益**：
    * `好處1：頂級美饌 2 人 5 折起優惠`
    * `好處2：機場接送`
    * `好處2：Le Oràno 奢華旅遊私人俱樂部`
    * `好處3：全球機場貴賓室`
    * `好處4：FunNow 最高 5 折優惠`
* **亞萬卡權益**：
    * `好處1：一般消費筆筆累積亞洲萬里通里數`
    * `好處2：優先兌換獎勵機票`
    * `好處3：全球機場貴賓室禮遇`
    * `好處4：海外網路漫遊優惠`

### 5. 有效期限格式 (`valid_period`)
格式較多元，處理時需注意 Parsing：
* **單一區間**：`2025/01/01-2025/12/31`
* **開放結束日**：`2025/01/01-`
* **文字描述**：`至 2025/12/31`
* **JSON 複合格式**（用於區分不同消費類型的效期）：
    * `{"general_spending": "...", "accelerator": "..."}`

---

## RAG 系統應用建議

### Pre-filtering (檢索前篩選)
在 Query 階段，先利用 Metadata 縮小搜尋範圍：
* **情境**：使用者問「CUBE卡玩數位有什麼回饋？」
* **操作**：設定 filter `card_name == "國泰CUBE卡"` AND `scheme_name == "玩數位"`。

### Context Injection (上下文注入)
將 Metadata 轉化為自然語言，加在 `text` 之前餵給 LLM：
* **原始 Text**：「Exclude 包含：App Store...」
* **注入後 Prompt**：「(文件類型：權益規則 | 方案：玩數位) Exclude 包含：App Store...」
* **目的**：讓 LLM 知道這段排除條款是屬於哪個方案的，避免張冠李戴。